<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>单词消消乐</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 适应屏幕宽度 -->
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            animation: bounce 1s infinite alternate;
            font-size: 6vw; /* 使标题字体自适应屏幕宽度 */
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            width: 600px;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 4vw; /* 自适应字体大小 */
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 600px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5vw; /* 根据屏幕宽度调整字体大小 */
            font-weight: bold;
            color: black;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .card.clicked {
            transform: scale(1.05);
        }

        .card.correct {
            background: #90EE90 !important;
            transform: rotateY(180deg);
            opacity: 0;
            transition: all 0.5s;
        }

        .card.wrong {
            background: #FFB6C1 !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .restart-btn {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 4vw; /* 自适应字体大小 */
            margin-top: 15px;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            transform: scale(1.1);
            background: #FF5252;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>单词消消乐</h1>
    </div>
    <div class="game-info">
        <div>已用时间: <span id="timer">0</span>秒</div>
        <div>剩余错误次数: <span id="errors">5</span></div>
    </div>
    <div class="card-container" id="cardContainer"></div>

    <script>
        const wordPairs = [
            ['tradition', '传统'],
            ['all over the world', '世界各地'],
            ['special', '特别的'],
            ['event', '事件'],
            ['called', '被称为'],
            ['meet', '遇见'],
            ['present', '礼物'],
            ['life', '生活'],
            ['large', '大的'],
            ['sweet', '甜的'],
            ['find', '发现'],
            ['dead', '死的'],
            ['put', '放'],
            ['culture', '文化'],
            ['look after', '照顾'],
            ['feed', '喂养'],
            ['each other', '互相'],
            ['take', '拿'],
            ['circle', '圆圈']
        ];

        let selectedCard = null;
        let currentPage = 0;
        let errorsLeft = 5;
        let timeElapsed = 0;
        let timerId = null;

        function createGame() {
            const container = document.getElementById('cardContainer');
            const pagePairs = getPagePairs();
            
            container.innerHTML = '';
            pagePairs.forEach(pair => {
                const [en, cn] = pair;
                createCard(en, 'en');
                createCard(cn, 'cn');
            });
            
            shuffleCards();
            startTimer();
        }

        function getPagePairs() {
            const shuffled = [...wordPairs].sort(() => Math.random() - 0.5);
            return shuffled.slice(currentPage * 6, (currentPage + 1) * 6); // 每页6张卡片，共3行3张
        }

        function createCard(text, type) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.value = type === 'en' ? text : 
                wordPairs.find(pair => pair[1] === text)[0];
            card.textContent = text;
            card.style.background = type === 'en' ? '#FFD700' : '#87CEEB';
            card.addEventListener('click', () => handleCardClick(card));
            document.getElementById('cardContainer').appendChild(card);
        }

        function handleCardClick(card) {
            if (card.classList.contains('correct') || card.classList.contains('clicked')) return;

            card.classList.add('clicked');

            setTimeout(() => {
                card.classList.remove('clicked');
                if (!selectedCard) {
                    selectedCard = card;
                    card.style.transform = 'scale(1.05)';
                } else {
                    if (selectedCard === card) return;
                    
                    if (selectedCard.dataset.value === card.dataset.value) {
                        handleCorrectMatch(selectedCard, card);
                    } else {
                        handleWrongMatch(selectedCard, card);
                    }
                    selectedCard.style.transform = '';
                    selectedCard = null;
                }
            }, 200);
        }

        function handleCorrectMatch(card1, card2) {
            card1.classList.add('correct');
            card2.classList.add('correct');
            setTimeout(() => {
                if ([...document.querySelectorAll('.card')].every(c => c.classList.contains('correct'))) {
                    currentPage++;
                    if (currentPage * 6 >= wordPairs.length) {
                        endGame(true);
                    } else {
                        createGame();
                    }
                }
            }, 500);
        }

        function handleWrongMatch(card1, card2) {
            errorsLeft--;
            document.getElementById('errors').textContent = errorsLeft;
            
            card1.classList.add('wrong');
            card2.classList.add('wrong');
            
            setTimeout(() => {
                card1.classList.remove('wrong');
                card2.classList.remove('wrong');
            }, 1000);

            if (errorsLeft <= 0) {
                endGame(false);
            }
        }

        function shuffleCards() {
            const container = document.getElementById('cardContainer');
            const cards = [...container.children];
            cards.sort(() => Math.random() - 0.5);
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
        }

        function startTimer() {
            if (!timerId) {  // 只在计时器还没启动时启动计时器
                timerId = setInterval(() => {
                    timeElapsed++;  // 每秒增加时间
                    document.getElementById('timer').textContent = timeElapsed;  // 更新显示的时间
                }, 1000);  // 每1000毫秒（即1秒）执行一次
            }
        }

        function endGame(success) {
            clearInterval(timerId);
            const message = success ? 
                `你太棒了！游戏时间：${timeElapsed}秒 🎉` : 
                `你失败了！再试一次！💪 游戏时间：${timeElapsed}秒`;
            
            const gameOverDiv = document.createElement('div');
            gameOverDiv.className = 'game-over';
            gameOverDiv.innerHTML = 
                `<h2>${message}</h2>
                <button class="restart-btn" onclick="restartGame()">再玩一次</button>`;
            document.body.appendChild(gameOverDiv);
        }

        function restartGame() {
            currentPage = 0;
            errorsLeft = 5;
            document.getElementById('errors').textContent = errorsLeft;
            document.querySelector('.game-over')?.remove();
            createGame();
        }

        // 初始化游戏
        createGame();
    </script>
</body>
</html>
