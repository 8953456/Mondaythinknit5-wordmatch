<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å•è¯æ¶ˆæ¶ˆä¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- é€‚åº”å±å¹•å®½åº¦ -->
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            animation: bounce 1s infinite alternate;
            font-size: 6vw; /* ä½¿æ ‡é¢˜å­—ä½“è‡ªé€‚åº”å±å¹•å®½åº¦ */
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            width: 600px;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 4vw; /* è‡ªé€‚åº”å­—ä½“å¤§å° */
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 600px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5vw; /* æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´å­—ä½“å¤§å° */
            font-weight: bold;
            color: black;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .card.clicked {
            transform: scale(1.05);
        }

        .card.correct {
            background: #90EE90 !important;
            transform: rotateY(180deg);
            opacity: 0;
            transition: all 0.5s;
        }

        .card.wrong {
            background: #FFB6C1 !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .restart-btn {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 4vw; /* è‡ªé€‚åº”å­—ä½“å¤§å° */
            margin-top: 15px;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            transform: scale(1.1);
            background: #FF5252;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>å•è¯æ¶ˆæ¶ˆä¹</h1>
    </div>
    <div class="game-info">
        <div>å·²ç”¨æ—¶é—´: <span id="timer">0</span>ç§’</div>
        <div>å‰©ä½™é”™è¯¯æ¬¡æ•°: <span id="errors">5</span></div>
    </div>
    <div class="card-container" id="cardContainer"></div>

    <script>
        const wordPairs = [
            ['tradition', 'ä¼ ç»Ÿ'],
            ['all over the world', 'ä¸–ç•Œå„åœ°'],
            ['special', 'ç‰¹åˆ«çš„'],
            ['event', 'äº‹ä»¶'],
            ['called', 'è¢«ç§°ä¸º'],
            ['meet', 'é‡è§'],
            ['present', 'ç¤¼ç‰©'],
            ['life', 'ç”Ÿæ´»'],
            ['large', 'å¤§çš„'],
            ['sweet', 'ç”œçš„'],
            ['find', 'å‘ç°'],
            ['dead', 'æ­»çš„'],
            ['put', 'æ”¾'],
            ['culture', 'æ–‡åŒ–'],
            ['look after', 'ç…§é¡¾'],
            ['feed', 'å–‚å…»'],
            ['each other', 'äº’ç›¸'],
            ['take', 'æ‹¿'],
            ['circle', 'åœ†åœˆ']
        ];

        let selectedCard = null;
        let currentPage = 0;
        let errorsLeft = 5;
        let timeElapsed = 0;
        let timerId = null;

        function createGame() {
            const container = document.getElementById('cardContainer');
            const pagePairs = getPagePairs();
            
            container.innerHTML = '';
            pagePairs.forEach(pair => {
                const [en, cn] = pair;
                createCard(en, 'en');
                createCard(cn, 'cn');
            });
            
            shuffleCards();
            startTimer();
        }

        function getPagePairs() {
            const shuffled = [...wordPairs].sort(() => Math.random() - 0.5);
            return shuffled.slice(currentPage * 6, (currentPage + 1) * 6); // æ¯é¡µ6å¼ å¡ç‰‡ï¼Œå…±3è¡Œ3å¼ 
        }

        function createCard(text, type) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.value = type === 'en' ? text : 
                wordPairs.find(pair => pair[1] === text)[0];
            card.textContent = text;
            card.style.background = type === 'en' ? '#FFD700' : '#87CEEB';
            card.addEventListener('click', () => handleCardClick(card));
            document.getElementById('cardContainer').appendChild(card);
        }

        function handleCardClick(card) {
            if (card.classList.contains('correct') || card.classList.contains('clicked')) return;

            card.classList.add('clicked');

            setTimeout(() => {
                card.classList.remove('clicked');
                if (!selectedCard) {
                    selectedCard = card;
                    card.style.transform = 'scale(1.05)';
                } else {
                    if (selectedCard === card) return;
                    
                    if (selectedCard.dataset.value === card.dataset.value) {
                        handleCorrectMatch(selectedCard, card);
                    } else {
                        handleWrongMatch(selectedCard, card);
                    }
                    selectedCard.style.transform = '';
                    selectedCard = null;
                }
            }, 200);
        }

        function handleCorrectMatch(card1, card2) {
            card1.classList.add('correct');
            card2.classList.add('correct');
            setTimeout(() => {
                if ([...document.querySelectorAll('.card')].every(c => c.classList.contains('correct'))) {
                    currentPage++;
                    if (currentPage * 6 >= wordPairs.length) {
                        endGame(true);
                    } else {
                        createGame();
                    }
                }
            }, 500);
        }

        function handleWrongMatch(card1, card2) {
            errorsLeft--;
            document.getElementById('errors').textContent = errorsLeft;
            
            card1.classList.add('wrong');
            card2.classList.add('wrong');
            
            setTimeout(() => {
                card1.classList.remove('wrong');
                card2.classList.remove('wrong');
            }, 1000);

            if (errorsLeft <= 0) {
                endGame(false);
            }
        }

        function shuffleCards() {
            const container = document.getElementById('cardContainer');
            const cards = [...container.children];
            cards.sort(() => Math.random() - 0.5);
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
        }

        function startTimer() {
            if (!timerId) {  // åªåœ¨è®¡æ—¶å™¨è¿˜æ²¡å¯åŠ¨æ—¶å¯åŠ¨è®¡æ—¶å™¨
                timerId = setInterval(() => {
                    timeElapsed++;  // æ¯ç§’å¢åŠ æ—¶é—´
                    document.getElementById('timer').textContent = timeElapsed;  // æ›´æ–°æ˜¾ç¤ºçš„æ—¶é—´
                }, 1000);  // æ¯1000æ¯«ç§’ï¼ˆå³1ç§’ï¼‰æ‰§è¡Œä¸€æ¬¡
            }
        }

        function endGame(success) {
            clearInterval(timerId);
            const message = success ? 
                `ä½ å¤ªæ£’äº†ï¼æ¸¸æˆæ—¶é—´ï¼š${timeElapsed}ç§’ ğŸ‰` : 
                `ä½ å¤±è´¥äº†ï¼å†è¯•ä¸€æ¬¡ï¼ğŸ’ª æ¸¸æˆæ—¶é—´ï¼š${timeElapsed}ç§’`;
            
            const gameOverDiv = document.createElement('div');
            gameOverDiv.className = 'game-over';
            gameOverDiv.innerHTML = 
                `<h2>${message}</h2>
                <button class="restart-btn" onclick="restartGame()">å†ç©ä¸€æ¬¡</button>`;
            document.body.appendChild(gameOverDiv);
        }

        function restartGame() {
            currentPage = 0;
            errorsLeft = 5;
            document.getElementById('errors').textContent = errorsLeft;
            document.querySelector('.game-over')?.remove();
            createGame();
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        createGame();
    </script>
</body>
</html>
